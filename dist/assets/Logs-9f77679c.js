import{L as w,l as v}from"./LogService-3d2f8c6e.js";import{A as b,L as C,H as k}from"./Loader-c96cb4f4.js";import{d as y,_ as A,r as a,o as $,c as x,a as o,w as l,F as B,b as T,e as n,g as V}from"./index-78299d8c.js";const I=y({name:"Logs",components:{Alert:b,Loader:C},data(){return{logs:[],OriginalLogs:[],SelectedLog:new w,searchText:"",errorResponse:new k,type:"",msg:"",time:0,callBack:"",showLoader:!1,columns:[],dataLogs:[]}},created(){this.getLogs()},methods:{async getLogs(){this.showLoader=!0,await v.getAll().then(s=>{s.data.status==="success"&&(this.logs=this.formatLogs(s.data.data),this.OriginalLogs=s.data.data),this.showLoader=!1}).catch(s=>{let e=this.errorResponse.handleResponse(s);this.setAlert(this.errorResponse.displayErrors(e)||"Ocorreram erros durante o processo","error",!1),this.logs=[],this.OriginalLogs=this.logs})},search(){this.getLogs(),this.logs=this.formatLogs(this.filterItems(this.logs,this.searchText))},filterItems(s,e){return s.filter(t=>t.usuario.toLowerCase().includes(e.toLowerCase())||t.tipo.toLowerCase().includes(e.toLowerCase())||t.acao.toLowerCase().includes(e.toLowerCase())||t.created_at.toLowerCase().includes(e.toLowerCase()))},filterLocal(){this.logs=this.OriginalLogs,this.logs=this.formatLogs(this.filterItems(this.logs,this.searchText))},setAlert(s,e,t,i){this.msg=s,this.type=e,this.time=i||3e3,this.callBack=t?"/logs":"",this.showLoader=!1},clearAlert(){this.msg="",this.type="",this.time=0,this.callBack=""},formatLogs(s){const e=[];return s.forEach(t=>{e.push({id:t.id,usuario:t.usuario,tipo:t.tipo,data:t.created_at,metodo:t.acao,acoes:""})}),e},openInNewTab(s){const e=`${window.location.origin}/logs/${s}`;window.open(e,"_blank")}}});const N={class:"responsive-table"};function O(s,e,t,i,R,E){const m=a("Alert"),p=a("v-card-title"),c=a("v-btn"),g=a("v-text-field"),u=a("v-col"),h=a("v-row"),_=a("v-data-table"),d=a("v-container"),f=a("v-card"),L=a("Loader");return $(),x(B,null,[o(m,{msg:s.msg,type:s.type,time:s.time,callback:s.callBack,onClearAlert:s.clearAlert},null,8,["msg","type","time","callback","onClearAlert"]),o(d,{class:"flex-wrap d-flex fullpage"},{default:l(()=>[o(f,{class:"d-flex align-center flex-column w-100 no-padding","rounded-lg":""},{default:l(()=>[o(p,{class:"flex-row page-title"},{default:l(()=>e[4]||(e[4]=[T(" Logs ",-1)])),_:1,__:[4]}),o(d,null,{default:l(()=>[o(h,{justify:"end",class:"mb-3","no-gutters":""},{default:l(()=>[o(u,{cols:"12",md:"12",sm:"12",class:"text-right"},{default:l(()=>[o(c,{size:"small",color:"#cecece",class:"mr-2",onClick:e[0]||(e[0]=r=>s.search())},{default:l(()=>e[5]||(e[5]=[n("span",{class:"material-icons md-16 black"},"search",-1),n("b",null,"Buscar",-1)])),_:1,__:[5]}),o(g,{label:"Busca",modelValue:s.searchText,"onUpdate:modelValue":e[1]||(e[1]=r=>s.searchText=r),variant:"underlined",class:"mr-2",onKeypress:e[2]||(e[2]=V(r=>s.search(),["enter"])),onKeyup:e[3]||(e[3]=r=>s.filterLocal())},null,8,["modelValue"])]),_:1})]),_:1}),n("div",N,[o(_,{items:s.logs,class:"elevation-1 striped-table","items-per-page":"15","items-per-page-text":"Itens por pagina"},{"item.acoes":l(({item:r})=>[o(c,{size:"x-small",color:"black",class:"ml-2",onClick:z=>s.openInNewTab(r.id)},{default:l(()=>e[6]||(e[6]=[n("span",{class:"material-icons md-16"},"edit",-1),n("b",null,"Visualizar",-1)])),_:2,__:[6]},1032,["onClick"])]),_:1},8,["items"])])]),_:1})]),_:1})]),_:1}),o(L,{showLoader:s.showLoader},null,8,["showLoader"])],64)}const S=A(I,[["render",O]]);export{S as default};
