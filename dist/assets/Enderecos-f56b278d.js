import{E as S,e as v}from"./EnderecoService-f6496184.js";import{A as B,L as V,H as D}from"./Loader-c96cb4f4.js";import{d as R,_ as T,r as a,o as x,c as j,a as t,w as o,F as z,b as i,e as n,f as p,v as g,g as F,t as m}from"./index-78299d8c.js";const I=R({name:"Enderecos",components:{Alert:B,Loader:V},data(){return{enderecos:[],originalEnderecos:[],dialog:!1,dialogActive:!1,SelectedEndereco:new S,searchText:"",errorResponse:new D,type:"",msg:"",time:0,callBack:"",showLoader:!1,canEdit:!1,canDelete:!1,canAdd:!1}},created(){this.getEnderecos(),this.originalEnderecos=this.enderecos},methods:{setDelete(s){this.SelectedEndereco=s,this.dialog=!0},setEdit(s){this.SelectedEndereco=s,this.$router.push(`/endereco/${s.id}`)},async getEnderecos(){this.showLoader=!0,await v.getAll().then(s=>{s.data.status==="success"&&(this.enderecos=this.formatEnderecos(s.data.data),this.originalEnderecos=s.data.data),this.showLoader=!1}).catch(s=>{const e=this.errorResponse.handleResponse(s);this.setAlert(this.errorResponse.displayErrors(e)||"Ocorreram erros durante o processo","error",!1),this.enderecos=[],this.originalEnderecos=this.enderecos})},async confirmDelete(){this.dialog=!1,this.showLoader=!0,await v.destroy(this.SelectedEndereco.id).then(s=>{this.setAlert(s.data.message||"Ocorreram erros durante o processo",s.data.status||"error",!1),this.getEnderecos()}).catch(s=>{let e=this.errorResponse.handleResponse(s);this.setAlert(this.errorResponse.displayErrors(e)||"Ocorreram erros durante o processo","error",!1),this.enderecos=[],this.originalEnderecos=this.enderecos})},search(){this.getEnderecos(),this.originalEnderecos=this.enderecos,this.enderecos=this.formatEnderecos(this.filterItems(this.enderecos,this.searchText))},filterItems(s,e){return s.filter(r=>r.logradouro.toLowerCase().includes(e.toLowerCase())||r.cep.toLowerCase().includes(e.toLowerCase())||r.cidade.toLowerCase().includes(e.toLowerCase())||r.uf.toLowerCase().includes(e.toLowerCase()))},filterLocal(){this.enderecos=this.originalEnderecos,this.enderecos=this.formatEnderecos(this.filterItems(this.enderecos,this.searchText))},setAlert(s,e,r,u){window.scrollTo({top:0,behavior:"auto"}),this.msg=s,this.type=e,this.time=u||3e3,this.callBack=r?"/enderecos":"",this.showLoader=!1},clearAlert(){this.msg="",this.type="",this.time=0,this.callBack=""},formatEnderecos(s){const e=[];return s.forEach(r=>{e.push({id:r.id,cep:r.cep,uf:r.uf,cidade:r.cidade,logradouro:r.logradouro+" "+r.numero,acoes:""})}),e}}});function K(s,e,r,u,N,O){const E=a("Alert"),h=a("v-card-title"),c=a("v-btn"),w=a("v-text-field"),b=a("v-col"),d=a("v-row"),C=a("v-data-table"),f=a("v-container"),_=a("v-card"),L=a("Loader"),y=a("v-card-text"),k=a("v-card-actions"),A=a("v-dialog");return x(),j(z,null,[t(E,{msg:s.msg,type:s.type,time:s.time,callback:s.callBack,onClearAlert:s.clearAlert},null,8,["msg","type","time","callback","onClearAlert"]),t(f,{class:"flex-wrap d-flex fullpage"},{default:o(()=>[t(_,{class:"d-flex align-center flex-column w-100","rounded-lg":""},{default:o(()=>[t(h,{class:"flex-row page-title"},{default:o(()=>e[8]||(e[8]=[i(" Endereços Cadastrados ",-1)])),_:1,__:[8]}),t(f,null,{default:o(()=>[t(d,{justify:"end",class:"mb-3","no-gutters":""},{default:o(()=>[t(b,{cols:"12",md:"12",sm:"12",class:"text-right"},{default:o(()=>[t(c,{size:"small",color:"#cecece",class:"mr-2",onClick:e[0]||(e[0]=l=>s.search())},{default:o(()=>e[9]||(e[9]=[n("span",{class:"material-icons md-16 black"},"search",-1),n("b",null,"Buscar",-1)])),_:1,__:[9]}),p(t(c,{size:"small",color:"#f5c21f",onClick:e[1]||(e[1]=l=>s.$router.push("/endereco"))},{default:o(()=>e[10]||(e[10]=[n("span",{class:"material-icons md-16 black"},"add",-1),n("b",null,"Adicionar",-1)])),_:1,__:[10]},512),[[g,s.canAdd]]),t(w,{label:"Busca",modelValue:s.searchText,"onUpdate:modelValue":e[2]||(e[2]=l=>s.searchText=l),variant:"underlined",class:"mr-2",onKeypress:e[3]||(e[3]=F(l=>s.search(),["enter"])),onKeyup:e[4]||(e[4]=l=>s.filterLocal())},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{justify:"center",class:"mb-3","no-gutters":""},{default:o(()=>[t(f,{class:"d-flex align-center flex-row container-control no-padding"},{default:o(()=>[t(C,{items:s.enderecos,class:"elevation-1 striped-table","items-per-page":"15","items-per-page-text":"Itens por pagina"},{"item.acoes":o(({item:l})=>[p(t(c,{size:"x-small",color:"#f5c21f",class:"ml-2",onClick:$=>s.setEdit(l)},{default:o(()=>e[11]||(e[11]=[n("span",{class:"material-icons md-16 black"},"edit",-1),n("b",null,"Editar",-1)])),_:2,__:[11]},1032,["onClick"]),[[g,s.canEdit]]),p(t(c,{size:"x-small",color:"#000000",class:"ml-2 white",onClick:$=>s.setDelete(l)},{default:o(()=>e[12]||(e[12]=[n("span",{class:"material-icons md-16"},"delete",-1),n("b",null,"Excluir",-1)])),_:2,__:[12]},1032,["onClick"]),[[g,s.canDelete]])]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(L,{showLoader:s.showLoader},null,8,["showLoader"]),t(A,{modelValue:s.dialog,"onUpdate:modelValue":e[7]||(e[7]=l=>s.dialog=l),width:"auto"},{default:o(()=>[t(_,null,{default:o(()=>[t(h,null,{default:o(()=>[t(d,{justify:"center",class:"mt-6 mb-6"},{default:o(()=>e[13]||(e[13]=[n("span",{class:"modal-title"},"Exclusão",-1)])),_:1,__:[13]})]),_:1}),t(y,{class:"mr-6 ml-6 pb-6 pt-6"},{default:o(()=>[t(d,{class:"modal-title mt-0 mb-3"},{default:o(()=>e[14]||(e[14]=[i(" Tem certeza de que deseja excluir este Perfil ? ",-1)])),_:1,__:[14]}),t(d,{class:"modal-text column-grey m-4"},{default:o(()=>[e[15]||(e[15]=n("b",{class:"mr-2"},"Cep: ",-1)),i(" "+m(s.SelectedEndereco.cep),1)]),_:1,__:[15]}),t(d,{class:"modal-text column-white m-4"},{default:o(()=>[e[16]||(e[16]=n("b",{class:"mr-2"},"UF / Cidade: ",-1)),i(" "+m(s.SelectedEndereco.uf)+" / "+m(s.SelectedEndereco.cidade),1)]),_:1,__:[16]}),t(d,{class:"modal-text column-grey m-4"},{default:o(()=>[e[17]||(e[17]=n("b",{class:"mr-2"},"Logradouro: ",-1)),i(" "+m(s.SelectedEndereco.logradouro)+" "+m(s.SelectedEndereco.numero),1)]),_:1,__:[17]})]),_:1}),t(k,{class:"mt-6"},{default:o(()=>[t(d,{justify:"end",class:"mr-6 mb-6"},{default:o(()=>[t(c,{color:"#f5c21f",onClick:e[5]||(e[5]=l=>s.dialog=!1)},{default:o(()=>e[18]||(e[18]=[i(" Fechar ",-1)])),_:1,__:[18]}),t(c,{color:"#000000",onClick:e[6]||(e[6]=l=>s.confirmDelete())},{default:o(()=>e[19]||(e[19]=[i(" Confirmar ",-1)])),_:1,__:[19]})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const G=T(I,[["render",K]]);export{G as default};
